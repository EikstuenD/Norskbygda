<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Norsk Ordmester - Videoutgave</title>
    <style>
        /* --- CSS: DESIGN --- */
        :root {
            --primary: #007AFF; 
            --antonym: #FF9500;
            --bg: #F2F2F7;
            --card: #FFFFFF;
            --text: #1C1C1E;
            --correct: #34C759;
            --wrong: #FF3B30;
            --bar-bg: #E5E5EA;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
            user-select: none;
        }

        .container {
            background: var(--card);
            padding: 25px;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 700px;
            position: relative;
        }

        /* Topp-bar med stats */
        .header-stats {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: 600;
            color: #8E8E93;
            margin-bottom: 20px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .streak-counter { color: #FF9500; opacity: 0; transition: opacity 0.3s; }
        .streak-visible { opacity: 1; }

        .word-display {
            font-size: 2.5rem; /* Litt mindre skrift for 친 f친 plass til lengre uttrykk */
            font-weight: 800;
            margin: 10px 0 30px 0;
            color: #1C1C1E;
            text-align: center;
            min-height: 60px;
        }

        /* Layout for spill-omr친det: Knapper til venstre, Bar til h칮yre */
        .game-layout {
            display: flex;
            gap: 20px;
            align-items: stretch;
        }

        .options-area {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Progress Bar (Termometer-stil) */
        .progress-container {
            width: 40px;
            background-color: var(--bar-bg);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }

        .progress-fill {
            width: 100%;
            height: 0%; /* Endres med JS */
            background: linear-gradient(to top, #34C759, #30B0C7);
            position: absolute;
            bottom: 0;
            left: 0;
            transition: height 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 0 0 20px 20px;
        }

        .next-level-badge {
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            font-weight: bold;
            color: #999;
            z-index: 2;
        }

        /* Knapper */
        .btn {
            padding: 20px 5px;
            font-size: 1.1rem; /* Justert ned litt for fraser */
            font-weight: 600;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            color: white;
            transition: transform 0.1s;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            word-wrap: break-word;
        }
        .btn:active { transform: scale(0.96); box-shadow: 0 2px 0 rgba(0,0,0,0.1); }
        
        .btn-synonym { background-color: var(--primary); }
        .btn-antonym { background-color: var(--antonym); }

        .correct-anim { background-color: var(--correct) !important; transform: scale(1.05); }
        .wrong-anim { background-color: var(--wrong) !important; opacity: 0.6; animation: shake 0.4s; }

        /* Meny */
        #menu-screen h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .menu-btn { width: 100%; padding: 25px; font-size: 1.5rem; margin: 15px 0; }

        /* Flytende tekst ved poeng */
        .floating-text {
            position: absolute;
            font-weight: bold;
            font-size: 1.5rem;
            color: var(--correct);
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            z-index: 10;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.2); opacity: 0; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        #levelup-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            z-index: 100; color: white;
        }
        .hidden { display: none !important; }

    </style>
</head>
<body>

    <div id="menu-screen" class="container">
        <h1>游游 Norsk Ordmester</h1>
        <p style="color:#888; margin-bottom: 30px;">칒v p친 de 100 vanligste synonymene!</p>
        <button class="btn menu-btn btn-synonym" onclick="startGame('synonym')">Synonymer</button>
        <button class="btn menu-btn btn-antonym" onclick="startGame('antonym')">Antonymer</button>
    </div>

    <div id="game-screen" class="container hidden">
        <div class="header-stats">
            <span id="level-display">Niv친 1</span>
            <span id="streak-display" class="streak-counter">游댠 0</span>
            <span id="score-display">0 p</span>
        </div>

        <h3 id="question-text" style="text-align:center; color:#888; margin:0;">Finn ordet:</h3>
        <div id="current-word" class="word-display">ORDET</div>

        <div class="game-layout">
            <div id="options-container" class="options-area"></div>
            
            <div class="progress-container">
                <span class="next-level-badge">Neste</span>
                <div id="progress-fill" class="progress-fill"></div>
            </div>
        </div>

        <button class="btn" style="background:#E5E5EA; color:#333; margin-top:20px; width:100%;" onclick="goToMenu()">Avslutt</button>
    </div>

    <div id="levelup-modal" class="hidden">
        <h1 style="font-size: 3rem;">游꿀</h1>
        <h2>Niv친 opp!</h2>
        <p>Du er n친 p친 niv친 <span id="new-level-num">2</span></p>
        <button class="btn btn-synonym" style="width:200px; margin-top:20px;" onclick="closeLevelUp()">Fortsett</button>
    </div>

    <script>
        /* --- DATABASEN FRA YOUTUBE-VIDEOEN --- */
        /* Merk: Videoen hadde kun synonymer. Antonymer er lagt til manuelt for spillfunksjonalitet. */
        const wordDatabase = [
            { ord: "Alle steder", synonym: "Overalt", antonym: "Ingen steder" },
            { ord: "Jobb", synonym: "Arbeid", antonym: "Fritid" },
            { ord: "Fri", synonym: "Ledig", antonym: "Opptatt" },
            { ord: "Ferdig", synonym: "Fullf칮rt", antonym: "Uferdig" },
            { ord: "Ta pause", synonym: "Hvile litt", antonym: "Jobbe videre" },
            { ord: "G친 hjem", synonym: "Dra hjem", antonym: "Bli igjen" },
            { ord: "Se etter", synonym: "Lete etter", antonym: "Ignorere" },
            { ord: "Ta vare p친", synonym: "Passe p친", antonym: "Vanskj칮tte" },
            { ord: "Slappe av", synonym: "Hvile seg", antonym: "Stresse" },
            { ord: "Glad i", synonym: "Elske", antonym: "Hate" },
            { ord: "M칮te opp", synonym: "Komme til", antonym: "Utebli" },
            { ord: "Ta del i", synonym: "Delta i", antonym: "St친 utenfor" },
            { ord: "V칝re enig", synonym: "Ha samme mening", antonym: "V칝re uenig" },
            { ord: "L칝re om", synonym: "F친 kunnskap", antonym: "Glemme" },
            { ord: "Sette pris p친", synonym: "Verdsette", antonym: "Mislike" },
            { ord: "Bry seg om", synonym: "V칝re opptatt av", antonym: "Gi blaffen" },
            { ord: "Kaste bort", synonym: "Sl칮se med", antonym: "Spare" },
            { ord: "Ta hensyn til", synonym: "Vise omtanke", antonym: "V칝re hensynsl칮s" },
            { ord: "Plukke opp", synonym: "Samle inn", antonym: "Kaste fra seg" },
            { ord: "Bidra til", synonym: "Hjelpe til med", antonym: "Motarbeide" },
            { ord: "Spise sunt", synonym: "Ha sunt kosthold", antonym: "Spise usunt" },
            { ord: "Holde seg i form", synonym: "Trene ofte", antonym: "Forfalle" },
            { ord: "Bli bedre", synonym: "Komme seg", antonym: "Bli verre" },
            { ord: "V칝re syk", synonym: "F칮le seg d친rlig", antonym: "V칝re frisk" },
            { ord: "Slutte", synonym: "Legge opp", antonym: "Begynne" },
            { ord: "Komme fram", synonym: "Ankomme", antonym: "Dra" },
            { ord: "Bestille", synonym: "Reservere", antonym: "Avbestille" },
            { ord: "Starte", synonym: "Begynne", antonym: "Slutte" },
            { ord: "Tjene penger", synonym: "F친 inntekt", antonym: "Bruke penger" },
            { ord: "F친 jobb", synonym: "Bli ansatt", antonym: "Miste jobben" },
            { ord: "Si opp", synonym: "Slutte i jobben", antonym: "Bli ansatt" },
            { ord: "M칮te frist", synonym: "Rekke tiden", antonym: "Komme for sent" },
            { ord: "Stemme", synonym: "Delta i valg", antonym: "La v칝re" },
            { ord: "Diskutere", synonym: "Snakke om", antonym: "Tie stille" },
            { ord: "V칝re uenig", synonym: "Ha annen mening", antonym: "V칝re enig" },
            { ord: "Gj칮re en forskjell", synonym: "Bidra positivt", antonym: "V칝re passiv" },
            { ord: "F칮le seg bra", synonym: "Ha det godt", antonym: "F칮le seg d친rlig" },
            { ord: "Sove godt", synonym: "F친 nok s칮vn", antonym: "Sove d친rlig" },
            { ord: "V칝re avslappet", synonym: "F칮le seg rolig", antonym: "V칝re stresset" },
            { ord: "Beskytte", synonym: "Ta vare p친", antonym: "칒delegge" },
            { ord: "Gjenvinne", synonym: "Resirkulere", antonym: "Kaste i s칮pla" },
            { ord: "Reise langt", synonym: "Dra langt", antonym: "Bli hjemme" },
            { ord: "Planlegge", synonym: "Forberede", antonym: "Ta p친 sparket" },
            { ord: "V칝re sliten", synonym: "F칮le seg utmattet", antonym: "V칝re opplagt" },
            { ord: "Ta en dusj", synonym: "Vaske seg", antonym: "Bli skitten" },
            { ord: "V칝re sikker", synonym: "F칮le seg trygg", antonym: "V칝re usikker" },
            { ord: "V칝re flink", synonym: "V칝re dyktig", antonym: "V칝re udugelig" },
            { ord: "Huske", synonym: "Komme p친", antonym: "Glemme" },
            { ord: "Finne ut", synonym: "Oppdage", antonym: "Overse" },
            { ord: "Kjenne til", synonym: "Vite om", antonym: "V칝re ukjent med" }
        ];

        /* --- LOGIKK --- */
        let currentMode = '';
        let score = 0;
        let level = 1;
        let streak = 0;
        let pointsToNextLevel = 100;
        let currentLevelScore = 0;

        function startGame(mode) {
            currentMode = mode;
            score = 0;
            level = 1;
            streak = 0;
            currentLevelScore = 0;
            updateStats();
            
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');

            const text = mode === 'synonym' ? "Hva betyr det samme som:" : "Hva er det motsatte av:";
            document.getElementById('question-text').innerText = text;

            nextQuestion();
        }

        function nextQuestion() {
            const randomIdx = Math.floor(Math.random() * wordDatabase.length);
            const question = wordDatabase[randomIdx];
            const correctAns = question[currentMode];

            document.getElementById('current-word').innerText = question.ord;

            // Finn gale svar
            let options = [correctAns];
            while (options.length < 4) {
                const randWrong = wordDatabase[Math.floor(Math.random() * wordDatabase.length)];
                const wrongWord = randWrong[currentMode];
                if (!options.includes(wrongWord)) options.push(wrongWord);
            }
            options.sort(() => Math.random() - 0.5);

            const container = document.getElementById('options-container');
            container.innerHTML = ''; 

            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.innerText = opt;
                
                // Fargekode
                if(currentMode === 'synonym') btn.classList.add('btn-synonym');
                else btn.classList.add('btn-antonym');

                btn.onclick = (e) => checkAnswer(opt, correctAns, btn, e);
                container.appendChild(btn);
            });
        }

        function checkAnswer(selected, correct, btnElem, event) {
            const allBtns = document.querySelectorAll('#options-container .btn');
            allBtns.forEach(b => b.disabled = true);

            if (selected === correct) {
                // RIKTIG
                btnElem.classList.add('correct-anim');
                score += 10;
                currentLevelScore += 10;
                streak++;
                
                showFloatingText(event.clientX, event.clientY, getRandomPraise());
                
                if (currentLevelScore >= pointsToNextLevel) {
                    levelUp();
                } else {
                    setTimeout(nextQuestion, 1000);
                }
            } else {
                // FEIL
                btnElem.classList.add('wrong-anim');
                streak = 0;
                
                allBtns.forEach(b => {
                    if (b.innerText === correct) {
                        b.classList.add('correct-anim');
                        b.style.opacity = "0.7"; 
                    }
                });

                setTimeout(nextQuestion, 2000);
            }
            updateStats();
        }

        function levelUp() {
            level++;
            currentLevelScore = 0;
            document.getElementById('new-level-num').innerText = level;
            setTimeout(() => {
                document.getElementById('levelup-modal').classList.remove('hidden');
            }, 500);
        }

        function closeLevelUp() {
            document.getElementById('levelup-modal').classList.add('hidden');
            updateStats();
            nextQuestion();
        }

        function updateStats() {
            document.getElementById('score-display').innerText = score + " p";
            document.getElementById('level-display').innerText = "Niv친 " + level;
            
            const streakElem = document.getElementById('streak-display');
            streakElem.innerText = "游댠 " + streak;
            if(streak > 1) streakElem.classList.add('streak-visible');
            else streakElem.classList.remove('streak-visible');

            const percentage = (currentLevelScore / pointsToNextLevel) * 100;
            document.getElementById('progress-fill').style.height = percentage + "%";
        }

        function showFloatingText(x, y, text) {
            const el = document.createElement('div');
            el.className = 'floating-text';
            el.innerText = text;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        function getRandomPraise() {
            const words = ["Bra!", "Riktig!", "Supert!", "Godt!", "Fantastisk!", "Perfekt!"];
            return words[Math.floor(Math.random() * words.length)];
        }

        function goToMenu() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('menu-screen').classList.remove('hidden');
        }
    </script>
</body>
</html>
